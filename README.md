# Лабораторна робота: Калібрування камери та стереозір

Цей репозиторій містить реалізацію лабораторної роботи з моделювання процесів калібрування камери, формування стереопари, розрахунку проєкцій та ректифікації зображень. Реалізація виконується із використанням бібліотеки OpenCV та/або інших засобів, з дотриманням обмежень на використання готових функцій у критичних місцях, де це вимагає ручного контролю над математичними перетвореннями.

## Мета роботи

Ознайомитись з математичними основами моделі камери (модель камери-стенопа), процесом калібрування, формуванням стереопари та методами ректифікації зображень. Набути практичних навичок у роботі з внутрішніми і зовнішніми параметрами камери та їхнім визначенням.

## Основні завдання

1. **Проєкція 3D-точок на площину зображення**  
   Реалізація моделі камери-стенопа для задання внутрішніх та зовнішніх параметрів. Симуляція проєкції тривимірних точок на площину зображення без урахування дисторсії.

2. **Симуляція калібрувальних даних**  
   Генерація синтетичних зображень з проєкціями відомих 3D-точок, які можуть бути використані для подальшого калібрування камери.

3. **Калібрування камери (mono)**  
   Використання функції `cv::calibrateCamera` для калібрування параметрів камери. Порівняння отриманих результатів з еталонними значеннями.

4. **Додавання другої камери та симуляція стереопари**  
   Створення нової віртуальної камери з іншими внутрішніми та зовнішніми параметрами. Генерація даних для моно- та стерео-калібрування. Симуляція складної геометрії розміщення камер.

5. **Калібрування другої камери**  
   Аналогічно до пункту 3 — виконання моно-калібрування другої камери.

6. **Стерео-калібрування**  
   Використання `cv::stereoCalibrate` для оцінки зовнішніх параметрів системи камер. Порівняння результатів з відомими (еталонними) параметрами.

7. **Фундаментальна та істотна матриці**  
   Розрахунок фундаментальної та істотної матриць на основі геометрії камери. Порівняння з результатами, які повертає `stereoCalibrate`.

8. **Перевірка епіполярної геометрії**  
   Для проєкцій точок з простору перевірити виконання епіполярного обмеження:  
   `p_R.T * F * p_L = 0`, де `p_L`, `p_R` — проєкції точки на ліву та праву камери, `F` — фундаментальна матриця.

9. **Побудова матриць гомографії для ректифікації**  
   Обчислення матриць гомографії для приведення стереозображень до ректифікованого вигляду. Використання узгоджених внутрішніх параметрів камер для побудови спільного простору проєкцій.

10. **Візуалізація результатів ректифікації**  
    Симуляція проєкцій точок на зображення, виконання ректифікації. Виведення оригінальних та ректифікованих зображень. Перевірка, що відповідні точки лежать на одній горизонтальній лінії після ректифікації.

## Додаткові завдання

1. Порівняння результатів роботи власних реалізацій з функціями OpenCV (де це дозволено).
2. Аналіз похибок, що виникають при калібруванні у складних геометричних конфігураціях.
3. Дослідження впливу параметрів калібрування на точність побудови фундаментальної матриці та ректифікації.

## Вимоги до реалізації

- **Рекомендовані мови**: Python або C++
- **Заборонено використовувати**: готові функції OpenCV для обчислення проєкції, калібрування (окрім вказаних в завданні), побудови гомографій без пояснення.
- **Дозволено використовувати**: OpenCV для візуалізації та базових операцій із зображеннями (зчитування, збереження, відображення).
- **Автоматичне налаштування проєкту**:
  - Для C++: файл `CMakeLists.txt`
  - Для Python: `requirements.txt`
